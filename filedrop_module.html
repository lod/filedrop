

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />
<meta content="2.16.3" name="antsibull-docs" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>lod.filedrop.filedrop module – Drop a tree of files onto the remote system &mdash; lod.filedrop  documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=41de9001" />
      <link rel="stylesheet" type="text/css" href="_static/css/ansible.css?v=c5b67dd2" />
      <link rel="stylesheet" type="text/css" href="_static/antsibull-minimal.css" />
      <link rel="stylesheet" type="text/css" href="_static/css/rtd-ethical-ads.css?v=289b023e" />

  
    <link rel="shortcut icon" href="_static/images/Ansible-Mark-RGB_Black.png"/>
      <script src="_static/jquery.js?v=5d32c60e"></script>
      <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="_static/documentation_options.js?v=7f41d439"></script>
      <script src="_static/doctools.js?v=9bcbadda"></script>
      <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="search" title="Search" href="search.html" />
    <link rel="prev" title="Lod.Filedrop" href="index.html" /><!-- extra head elements for Ansible beyond RTD Sphinx Theme -->




</head>

<body class="wy-body-for-nav"><!-- extra body elements for Ansible beyond RTD Sphinx Theme -->

<div class="DocSite-globalNav ansibleNav">
  <ul>
    <li><a href="https://www.ansible.com/blog" target="_blank">Blog</a></li>
    <li><a href="https://forum.ansible.com/" target="_blank">Ansible community forum</a></li>
    <li><a href="https://docs.ansible.com/" target="_blank">Documentation</a></li>
  </ul>
</div>

<a class="DocSite-nav" href="https://lod.github.io/filedrop/branch/main/" style="padding-bottom: 30px;">

  <img class="DocSiteNav-logo"
    src="_static/images/Ansible-Mark-RGB_White.png"
    alt="Ansible Logo">
  <div class="DocSiteNav-title">lod.filedrop Collection Docs</div>
</a>
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            lod.filedrop
          </a><!--- Based on https://github.com/rtfd/sphinx_rtd_theme/pull/438/files -->

<div class="version">
  
    
  
</div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <label class="sr-only" for="q">Search docs:</label>
    <input type="text" class="st-default-search-input" id="q" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
  
              <ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">lod.filedrop.filedrop module – Drop a tree of files onto the remote system</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#synopsis">Synopsis</a></li>
<li class="toctree-l2"><a class="reference internal" href="#parameters">Parameters</a></li>
<li class="toctree-l2"><a class="reference internal" href="#notes">Notes</a></li>
<li class="toctree-l2"><a class="reference internal" href="#examples">Examples</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#authors">Authors</a></li>
<li class="toctree-l3"><a class="reference internal" href="#collection-links">Collection links</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<!-- extra nav elements for Ansible beyond RTD Sphinx Theme -->

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">lod.filedrop</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">lod.filedrop.filedrop module – Drop a tree of files onto the remote system</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">

  
           <div itemprop="articleBody">
             
  <span class="target" id="ansible-collections-lod-filedrop-filedrop-module"></span><section id="lod-filedrop-filedrop-module-drop-a-tree-of-files-onto-the-remote-system">
<h1>lod.filedrop.filedrop module – Drop a tree of files onto the remote system<a class="headerlink" href="#lod-filedrop-filedrop-module-drop-a-tree-of-files-onto-the-remote-system" title="Link to this heading"></a></h1>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This module is part of the <a class="reference external" href="https://galaxy.ansible.com/ui/repo/published/lod/filedrop/">lod.filedrop collection</a> (version 1.0.0-alpha).</p>
<p>It is not included in <code class="docutils literal notranslate"><span class="pre">ansible-core</span></code>.
To check whether it is installed, run <code class="code docutils literal notranslate"><span class="pre">ansible-galaxy</span> <span class="pre">collection</span> <span class="pre">list</span></code>.</p>
<p>To install it, use: <code class="code docutils literal notranslate"><span class="pre">ansible-galaxy</span> <span class="pre">collection</span> <span class="pre">install</span> <span class="pre">lod.filedrop</span></code>.</p>
<p>To use it in a playbook, specify: <code class="code docutils literal notranslate"><span class="pre">lod.filedrop.filedrop</span></code>.</p>
</div>
<p class="ansible-version-added">New in lod.filedrop 1.0.0</p>
<nav class="contents local" id="contents">
<ul class="simple">
<li><p><a class="reference internal" href="#synopsis" id="id1">Synopsis</a></p></li>
<li><p><a class="reference internal" href="#parameters" id="id2">Parameters</a></p></li>
<li><p><a class="reference internal" href="#notes" id="id3">Notes</a></p></li>
<li><p><a class="reference internal" href="#examples" id="id4">Examples</a></p></li>
</ul>
</nav>
<section id="synopsis">
<h2><a class="toc-backref" href="#id1" role="doc-backlink">Synopsis</a><a class="headerlink" href="#synopsis" title="Link to this heading"></a></h2>
<ul class="simple">
<li><p>Transfers a structured directory tree of files including directory creation, permission management and fine control handler notifications.</p></li>
<li><p>This action is designed for complex implementations, it excels at simplifying roles that touch multiple service configurations.</p></li>
<li><p>The action follows the principle of keeping the simple things simplex and the complex things possible. Much of the documentation is focused on the complex, most implementations should rarely require specific configuration.</p></li>
<li><p>Performance matches running <a class="reference external" href="https://docs.ansible.com/ansible/devel/collections/ansible/builtin/copy_module.html#ansible-collections-ansible-builtin-copy-module" title="(in Ansible vdevel)"><span class="xref std std-ref">ansible.builtin.copy</span></a> as this action plugin orchestrates the builtin copy and file operations. The use of pipelining is strongly recommended as this significantly increases the speed. There is significant scope to improve the performance by shifting some of the logic to the remote system and parallelising some operations, this may be tackled in the future if there is a need.</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This module has a corresponding <a class="reference external" href="https://docs.ansible.com/ansible/devel/plugins/action.html#action-plugins" title="(in Ansible vdevel)"><span class="xref std std-ref">action plugin</span></a>.</p>
</div>
</section>
<section id="parameters">
<h2><a class="toc-backref" href="#id2" role="doc-backlink">Parameters</a><a class="headerlink" href="#parameters" title="Link to this heading"></a></h2>
<table class="longtable ansible-option-table docutils align-default" style="width: 100%">
<thead>
<tr class="row-odd"><th class="head"><p>Parameter</p></th>
<th class="head"><p>Comments</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><div class="ansible-option-cell">
<div class="ansibleOptionAnchor" id="parameter-delete_unmanaged"></div><p class="ansible-option-title" id="ansible-collections-lod-filedrop-filedrop-module-parameter-delete-unmanaged"><strong>delete_unmanaged</strong></p>
<a class="ansibleOptionLink" href="#parameter-delete_unmanaged" title="Permalink to this option"></a><p class="ansible-option-type-line"><span class="ansible-option-type">boolean</span></p>
</div></td>
<td><div class="ansible-option-cell"><p>Deletes unmanaged (unknown) files and directories inside managed directories.</p>
<p>This option sets the state for all managed directories, it can be overridden by setting the delete_unmanaged option on a directory.</p>
<p>See <code class="ansible-option docutils literal notranslate"><strong><a class="reference internal" href="#ansible-collections-lod-filedrop-filedrop-module-parameter-meta-managed-directories"><span class="std std-ref"><span class="pre">meta</span> <span class="pre">managed</span> <span class="pre">directories</span></span></a></strong></code> for details on when this option applies.</p>
<p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p>
<ul class="simple">
<li><p><code class="ansible-option-default-bold docutils literal notranslate"><strong><span class="pre">false</span></strong></code> <span class="ansible-option-choices-default-mark">← (default)</span></p></li>
<li><p><code class="ansible-option-choices-entry docutils literal notranslate"><span class="pre">true</span></code></p></li>
</ul>
</div></td>
</tr>
<tr class="row-odd"><td><div class="ansible-option-cell">
<div class="ansibleOptionAnchor" id="parameter-directory_management_file"></div><p class="ansible-option-title" id="ansible-collections-lod-filedrop-filedrop-module-parameter-directory-management-file"><strong>directory_management_file</strong></p>
<a class="ansibleOptionLink" href="#parameter-directory_management_file" title="Permalink to this option"></a><p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p>
</div></td>
<td><div class="ansible-option-cell"><p>Filename for files which specify that the containing directory is managed.</p>
<p>The file may provide an options set in either the yaml or json format. These options are applied to the directory and its contents.</p>
<p>This option can be either a filename string or a list of filename strings.</p>
<p>Setting this to <code class="ansible-value docutils literal notranslate"><span class="pre">&quot;&quot;</span></code> will prevent the directory_management_file functionality.</p>
<p>If multiple files are in the tree then all are used in alphabetical order.</p>
<p>Like <code class="ansible-option docutils literal notranslate"><strong><a class="reference internal" href="#ansible-collections-lod-filedrop-filedrop-module-parameter-ignore-file"><span class="std std-ref"><span class="pre">ignore_file</span></span></a></strong></code>, these files will not be transferred to the remote system.</p>
<p class="ansible-option-line"><strong class="ansible-option-default-bold">Default:</strong> <code class="ansible-option-default docutils literal notranslate"><span class="pre">[&quot;.permissions&quot;,</span> <span class="pre">&quot;_permissions&quot;,</span> <span class="pre">&quot;.permissions.yml&quot;,</span> <span class="pre">&quot;_permissions.yml&quot;,</span> <span class="pre">&quot;.permissions.json&quot;,</span> <span class="pre">&quot;_permissions.json&quot;]</span></code></p>
</div></td>
</tr>
<tr class="row-even"><td><div class="ansible-option-cell">
<div class="ansibleOptionAnchor" id="parameter-ignore_file"></div><p class="ansible-option-title" id="ansible-collections-lod-filedrop-filedrop-module-parameter-ignore-file"><strong>ignore_file</strong></p>
<a class="ansibleOptionLink" href="#parameter-ignore_file" title="Permalink to this option"></a><p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p>
</div></td>
<td><div class="ansible-option-cell"><p>File name to ignore. This is mostly useful for creating empty directories without git cleaning them up.</p>
<p>This can be either a filename string or a list of filename strings.</p>
<p>Setting this to <code class="ansible-value docutils literal notranslate"><span class="pre">&quot;&quot;</span></code> will prevent any files from being ignored.</p>
<p class="ansible-option-line"><strong class="ansible-option-default-bold">Default:</strong> <code class="ansible-option-default docutils literal notranslate"><span class="pre">[&quot;.keep&quot;,</span> <span class="pre">&quot;_keep&quot;]</span></code></p>
</div></td>
</tr>
<tr class="row-odd"><td><div class="ansible-option-cell">
<div class="ansibleOptionAnchor" id="parameter-meta%20managed%20directories"></div><p class="ansible-option-title" id="ansible-collections-lod-filedrop-filedrop-module-parameter-meta-managed-directories"><strong>meta managed directories</strong></p>
<a class="ansibleOptionLink" href="#parameter-meta%20managed%20directories" title="Permalink to this option"></a><p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p>
</div></td>
<td><div class="ansible-option-cell"><p>This is not an explicit field, it documents the concept of managed directories.</p>
<p>Given /var/log/my_thing/ we need a way to manage the directory permissions of the final my_thing directory without changing the parent directories. Doing this and managing all the possible interactions is complex, we use the following rules.</p>
<ol class="arabic simple">
<li><p>If the directory ancestor is managed then the directory is managed.</p></li>
<li><p>If the directory includes a <code class="ansible-option docutils literal notranslate"><strong><a class="reference internal" href="#ansible-collections-lod-filedrop-filedrop-module-parameter-directory-management-file"><span class="std std-ref"><span class="pre">directory_management_file</span></span></a></strong></code></p></li>
<li><p>If a key from <code class="ansible-option docutils literal notranslate"><strong><a class="reference internal" href="#ansible-collections-lod-filedrop-filedrop-module-parameter-path-re"><span class="std std-ref"><span class="pre">path_re</span></span></a></strong></code> matches and includes a / character.</p></li>
<li><p>If a directory does not exist on the remote system it is managed only for the creation.</p></li>
</ol>
</div></td>
</tr>
<tr class="row-even"><td><div class="ansible-option-cell">
<div class="ansibleOptionAnchor" id="parameter-meta%20option%20tiers"></div><p class="ansible-option-title" id="ansible-collections-lod-filedrop-filedrop-module-parameter-meta-option-tiers"><strong>meta option tiers</strong></p>
<a class="ansibleOptionLink" href="#parameter-meta%20option%20tiers" title="Permalink to this option"></a><p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p>
</div></td>
<td><div class="ansible-option-cell"><p>This is not an explicit field, it documents the layering of options as specified by <code class="ansible-option docutils literal notranslate"><strong><a class="reference internal" href="#ansible-collections-lod-filedrop-filedrop-module-parameter-meta-options"><span class="std std-ref"><span class="pre">meta</span> <span class="pre">options</span></span></a></strong></code>.</p>
<p>Options are derived from multiple levels, each subsequent level overrides the previous one.</p>
<p>Each option is optional, so the final options will typically be a mix of multiple levels.</p>
</div></td>
</tr>
<tr class="row-odd"><td><div class="ansible-option-indent"></div><div class="ansible-option-cell">
<div class="ansibleOptionAnchor" id="parameter-meta%20option%20tiers/level%201"></div><p class="ansible-option-title" id="ansible-collections-lod-filedrop-filedrop-module-parameter-meta-option-tiers-level-1"><strong>level 1</strong></p>
<a class="ansibleOptionLink" href="#parameter-meta%20option%20tiers/level%201" title="Permalink to this option"></a><p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p>
</div></td>
<td><div class="ansible-option-indent-desc"></div><div class="ansible-option-cell"><p>Options inherited from the parent directory.</p>
</div></td>
</tr>
<tr class="row-even"><td><div class="ansible-option-indent"></div><div class="ansible-option-cell">
<div class="ansibleOptionAnchor" id="parameter-meta%20option%20tiers/level%202"></div><p class="ansible-option-title" id="ansible-collections-lod-filedrop-filedrop-module-parameter-meta-option-tiers-level-2"><strong>level 2</strong></p>
<a class="ansibleOptionLink" href="#parameter-meta%20option%20tiers/level%202" title="Permalink to this option"></a><p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p>
</div></td>
<td><div class="ansible-option-indent-desc"></div><div class="ansible-option-cell"><p>Options set by <code class="ansible-option docutils literal notranslate"><strong><a class="reference internal" href="#ansible-collections-lod-filedrop-filedrop-module-parameter-path-re"><span class="std std-ref"><span class="pre">path_re</span></span></a></strong></code>.</p>
</div></td>
</tr>
<tr class="row-odd"><td><div class="ansible-option-indent"></div><div class="ansible-option-cell">
<div class="ansibleOptionAnchor" id="parameter-meta%20option%20tiers/level%203"></div><p class="ansible-option-title" id="ansible-collections-lod-filedrop-filedrop-module-parameter-meta-option-tiers-level-3"><strong>level 3</strong></p>
<a class="ansibleOptionLink" href="#parameter-meta%20option%20tiers/level%203" title="Permalink to this option"></a><p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p>
</div></td>
<td><div class="ansible-option-indent-desc"></div><div class="ansible-option-cell"><p>For directories only, options specified by a <code class="ansible-option docutils literal notranslate"><strong><a class="reference internal" href="#ansible-collections-lod-filedrop-filedrop-module-parameter-directory-management-file"><span class="std std-ref"><span class="pre">directory_management_file</span></span></a></strong></code> in that directory.</p>
</div></td>
</tr>
<tr class="row-even"><td><div class="ansible-option-indent"></div><div class="ansible-option-cell">
<div class="ansibleOptionAnchor" id="parameter-meta%20option%20tiers/level%204"></div><p class="ansible-option-title" id="ansible-collections-lod-filedrop-filedrop-module-parameter-meta-option-tiers-level-4"><strong>level 4</strong></p>
<a class="ansibleOptionLink" href="#parameter-meta%20option%20tiers/level%204" title="Permalink to this option"></a><p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p>
</div></td>
<td><div class="ansible-option-indent-desc"></div><div class="ansible-option-cell"><p>The executable bit from the source file. This overwrites the specified mode option.</p>
<p>If the executable is set it will pair with the desired read bits, so “0604” becomes “0705”.</p>
<p>This also works in reverse, if the executable bit is not set on the source file it will not be set on the remote host, even if the desired mode includes an executable portion.</p>
</div></td>
</tr>
<tr class="row-odd"><td><div class="ansible-option-cell">
<div class="ansibleOptionAnchor" id="parameter-meta%20options"></div><p class="ansible-option-title" id="ansible-collections-lod-filedrop-filedrop-module-parameter-meta-options"><strong>meta options</strong></p>
<a class="ansibleOptionLink" href="#parameter-meta%20options" title="Permalink to this option"></a><p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p>
</div></td>
<td><div class="ansible-option-cell"><p>This is not an explicit field, it documents the options as used by <code class="ansible-option docutils literal notranslate"><strong><a class="reference internal" href="#ansible-collections-lod-filedrop-filedrop-module-parameter-directory-management-file"><span class="std std-ref"><span class="pre">directory_management_file</span></span></a></strong></code> and <code class="ansible-option docutils literal notranslate"><strong><a class="reference internal" href="#ansible-collections-lod-filedrop-filedrop-module-parameter-path-re"><span class="std std-ref"><span class="pre">path_re</span></span></a></strong></code>.</p>
<p>Options do not all need to be set, the desired keys can be set and unset elements will be handled as described in <code class="ansible-option docutils literal notranslate"><strong><a class="reference internal" href="#ansible-collections-lod-filedrop-filedrop-module-parameter-meta-option-tiers"><span class="std std-ref"><span class="pre">meta</span> <span class="pre">option</span> <span class="pre">tiers</span></span></a></strong></code>.</p>
</div></td>
</tr>
<tr class="row-even"><td><div class="ansible-option-indent"></div><div class="ansible-option-cell">
<div class="ansibleOptionAnchor" id="parameter-meta%20options/delete_unmanaged"></div><p class="ansible-option-title" id="ansible-collections-lod-filedrop-filedrop-module-parameter-meta-options-delete-unmanaged"><strong>delete_unmanaged</strong></p>
<a class="ansibleOptionLink" href="#parameter-meta%20options/delete_unmanaged" title="Permalink to this option"></a><p class="ansible-option-type-line"><span class="ansible-option-type">boolean</span></p>
</div></td>
<td><div class="ansible-option-indent-desc"></div><div class="ansible-option-cell"><p>If set on a directory then all unknown files within that directory on the remote system will be deleted.</p>
<p>This is designed to ensure that ansible absolutely manages the configuration, that no additional unknown files have been added.</p>
<p>See also <code class="ansible-option docutils literal notranslate"><strong><a class="reference internal" href="#ansible-collections-lod-filedrop-filedrop-module-parameter-delete-unmanaged"><span class="std std-ref"><span class="pre">delete_unmanaged</span></span></a></strong></code>.</p>
<p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p>
<ul class="simple">
<li><p><code class="ansible-option-choices-entry docutils literal notranslate"><span class="pre">false</span></code></p></li>
<li><p><code class="ansible-option-choices-entry docutils literal notranslate"><span class="pre">true</span></code></p></li>
</ul>
</div></td>
</tr>
<tr class="row-odd"><td><div class="ansible-option-indent"></div><div class="ansible-option-cell">
<div class="ansibleOptionAnchor" id="parameter-meta%20options/group"></div><p class="ansible-option-title" id="ansible-collections-lod-filedrop-filedrop-module-parameter-meta-options-group"><strong>group</strong></p>
<a class="ansibleOptionLink" href="#parameter-meta%20options/group" title="Permalink to this option"></a><p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p>
</div></td>
<td><div class="ansible-option-indent-desc"></div><div class="ansible-option-cell"><p>Sets the file or directory group as in <a class="reference external" href="https://docs.ansible.com/ansible/devel/collections/ansible/builtin/copy_module.html#ansible-collections-ansible-builtin-copy-module" title="(in Ansible vdevel)"><span class="xref std std-ref">ansible.builtin.copy</span></a>.</p>
</div></td>
</tr>
<tr class="row-even"><td><div class="ansible-option-indent"></div><div class="ansible-option-cell">
<div class="ansibleOptionAnchor" id="parameter-meta%20options/mode"></div><p class="ansible-option-title" id="ansible-collections-lod-filedrop-filedrop-module-parameter-meta-options-mode"><strong>mode</strong></p>
<a class="ansibleOptionLink" href="#parameter-meta%20options/mode" title="Permalink to this option"></a><p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p>
</div></td>
<td><div class="ansible-option-indent-desc"></div><div class="ansible-option-cell"><p>Sets the file or directory mode as in <a class="reference external" href="https://docs.ansible.com/ansible/devel/collections/ansible/builtin/copy_module.html#ansible-collections-ansible-builtin-copy-module" title="(in Ansible vdevel)"><span class="xref std std-ref">ansible.builtin.copy</span></a>.</p>
<p>Unlike <a class="reference external" href="https://docs.ansible.com/ansible/devel/collections/ansible/builtin/copy_module.html#ansible-collections-ansible-builtin-copy-module" title="(in Ansible vdevel)"><span class="xref std std-ref">ansible.builtin.copy</span></a> we only support octal strings such as “0644”.</p>
<p>The executable portion of the mode always comes from the source, specifically the owner portion of the source. Unlike other permission elements this bit is preserved by git. Directories are always considered to be executable.</p>
<p>If the file or directory is deemed to be executable then the executable bit follows the read bit, any owner/group/all read bits set will have the corresponding executable bit set.</p>
</div></td>
</tr>
<tr class="row-odd"><td><div class="ansible-option-indent"></div><div class="ansible-option-cell">
<div class="ansibleOptionAnchor" id="parameter-meta%20options/notify"></div><p class="ansible-option-title" id="ansible-collections-lod-filedrop-filedrop-module-parameter-meta-options-notify"><strong>notify</strong></p>
<a class="ansibleOptionLink" href="#parameter-meta%20options/notify" title="Permalink to this option"></a><p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p>
</div></td>
<td><div class="ansible-option-indent-desc"></div><div class="ansible-option-cell"><p>Specifies an ansible handler to notify if the file has changed.</p>
<p>This works just like the ansible task notify option, but is more specific. Only the changed portions of the filedrop tree will trigger a notification. This allows two different services to be configured and without both handlers always being run.</p>
<p>This option may either be a string or a list of strings.</p>
</div></td>
</tr>
<tr class="row-even"><td><div class="ansible-option-indent"></div><div class="ansible-option-cell">
<div class="ansibleOptionAnchor" id="parameter-meta%20options/owner"></div><p class="ansible-option-title" id="ansible-collections-lod-filedrop-filedrop-module-parameter-meta-options-owner"><strong>owner</strong></p>
<a class="ansibleOptionLink" href="#parameter-meta%20options/owner" title="Permalink to this option"></a><p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p>
</div></td>
<td><div class="ansible-option-indent-desc"></div><div class="ansible-option-cell"><p>Sets the file or directory owner as in <a class="reference external" href="https://docs.ansible.com/ansible/devel/collections/ansible/builtin/copy_module.html#ansible-collections-ansible-builtin-copy-module" title="(in Ansible vdevel)"><span class="xref std std-ref">ansible.builtin.copy</span></a>.</p>
</div></td>
</tr>
<tr class="row-odd"><td><div class="ansible-option-cell">
<div class="ansibleOptionAnchor" id="parameter-path_re"></div><p class="ansible-option-title" id="ansible-collections-lod-filedrop-filedrop-module-parameter-path-re"><strong>path_re</strong></p>
<a class="ansibleOptionLink" href="#parameter-path_re" title="Permalink to this option"></a><p class="ansible-option-type-line"><span class="ansible-option-type">dictionary</span></p>
</div></td>
<td><div class="ansible-option-cell"><p>Set options of paths that match regular expressions.</p>
<p>This is a two level dictionary, the first level key is a regular expression.</p>
<p>The second level is a set of options as specified in <code class="ansible-option docutils literal notranslate"><strong><a class="reference internal" href="#ansible-collections-lod-filedrop-filedrop-module-parameter-meta-options"><span class="std std-ref"><span class="pre">meta</span> <span class="pre">options</span></span></a></strong></code>.</p>
<p>Any path which matches the regular expression (using re.search()) has the options set as specified.</p>
<p>Directories end in / for match reasons, this allows differentiation between files or directories.</p>
</div></td>
</tr>
<tr class="row-even"><td><div class="ansible-option-cell">
<div class="ansibleOptionAnchor" id="parameter-src"></div><p class="ansible-option-title" id="ansible-collections-lod-filedrop-filedrop-module-parameter-src"><strong>src</strong></p>
<a class="ansibleOptionLink" href="#parameter-src" title="Permalink to this option"></a><p class="ansible-option-type-line"><span class="ansible-option-type">path</span></p>
</div></td>
<td><div class="ansible-option-cell"><p>A directory tree that should be transferred.</p>
<p>The tree should be structured as it will reside on the remote system. &lt;src&gt;/etc/ssh/ssh_config.d/10-myhost.conf will be placed at /etc/ssh/ssh_config.d/10-myhost.conf</p>
<p>Files which end in .j2 will be rendered as templates and transferred to the host without the .j2 extension.</p>
<p>Special files, as set by the <code class="ansible-option docutils literal notranslate"><strong><a class="reference internal" href="#ansible-collections-lod-filedrop-filedrop-module-parameter-ignore-file"><span class="std std-ref"><span class="pre">ignore_file</span></span></a></strong></code> and <code class="ansible-option docutils literal notranslate"><strong><a class="reference internal" href="#ansible-collections-lod-filedrop-filedrop-module-parameter-directory-management-file"><span class="std std-ref"><span class="pre">directory_management_file</span></span></a></strong></code> options, allows configuration to reside in the tree.</p>
<p>Symlinks are treated as normal files, so a symlink from &lt;src&gt;/linked to &lt;src&gt;/target will result in two normal files on the remote host /linked and /target. These files will have the same contents but will not be linked together. Symlinks may also exit the &lt;src&gt; tree, so a symlink to /etc/passwd will result in the contents of that file being transferred to the remote host. All symlink behaviour is subject to change as the use cases become clearer.</p>
<p>The same search pattern as <a class="reference external" href="https://docs.ansible.com/ansible/devel/collections/ansible/builtin/copy_module.html#ansible-collections-ansible-builtin-copy-module" title="(in Ansible vdevel)"><span class="xref std std-ref">ansible.builtin.copy</span></a> and <a class="reference external" href="https://docs.ansible.com/ansible/devel/collections/ansible/builtin/template_module.html#ansible-collections-ansible-builtin-template-module" title="(in Ansible vdevel)"><span class="xref std std-ref">ansible.builtin.template</span></a> is used to find the requested directory in the current role or parent roles.</p>
<p class="ansible-option-line"><strong class="ansible-option-default-bold">Default:</strong> <code class="ansible-option-default docutils literal notranslate"><span class="pre">&quot;files&quot;</span></code></p>
</div></td>
</tr>
</tbody>
</table>
</section>
<section id="notes">
<h2><a class="toc-backref" href="#id3" role="doc-backlink">Notes</a><a class="headerlink" href="#notes" title="Link to this heading"></a></h2>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul class="simple">
<li><p>In the event of a failure processing will continue with the rest of the tree. The final status will be failure and the failure msg will reference all the failed elements.</p></li>
<li><p>WARNING - Using the standard task based notification system on this task will overwrite the custom notifications returned by this task. They cannot both be used together.</p></li>
</ul>
</div>
</section>
<section id="examples">
<h2><a class="toc-backref" href="#id4" role="doc-backlink">Examples</a><a class="headerlink" href="#examples" title="Link to this heading"></a></h2>
<div class="highlight-yaml+jinja notranslate"><div class="highlight"><pre><span></span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Transfer from files to remote host</span>
<span class="w">  </span><span class="nt">lod.filedrop.filedrop</span><span class="p">:</span>

<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Transfer from files and restart ssh if required</span>
<span class="w">  </span><span class="nt">lod.filedrop.filedrop</span><span class="p">:</span>
<span class="w">    </span><span class="nt">path_re</span><span class="p">:</span>
<span class="w">      </span><span class="nt">ssh</span><span class="p">:</span>
<span class="w">        </span><span class="nt">notify</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Restart sshd</span>
</pre></div>
</div>
<section id="authors">
<h3>Authors<a class="headerlink" href="#authors" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p>David Tulloh (&#64;lod)</p></li>
</ul>
</section>
<section id="collection-links">
<h3>Collection links<a class="headerlink" href="#collection-links" title="Link to this heading"></a></h3>
<ul class="ansible-links">
<li><span><a aria-role="button" class="ansible-link reference external" href="https://github.com/lod/filedrop/issues" rel="noopener external" target="_blank">Issue Tracker</a></span></li>
<li><span><a aria-role="button" class="ansible-link reference external" href="https://github.com/lod/filedrop" rel="noopener external" target="_blank">Repository (Sources)</a></span></li>
</ul>
</section>
</section>
</section>


           </div>
          </div>
          

<footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="index.html" class="btn btn-neutral float-left" title="Lod.Filedrop" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright David Tulloh (@lod).</p>
  </div>

  
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script><!-- extra footer elements for Ansible beyond RTD Sphinx Theme -->

</body>
</html>